{"version":3,"file":"src_app_orders_my-past-order_my-past-order_module_ts.js","mappings":"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","sources":["./src/app/orders/my-past-order/my-past-order-routing.module.ts","./src/app/orders/my-past-order/my-past-order.component.ts","./src/app/orders/my-past-order/my-past-order.component.html","./src/app/orders/my-past-order/my-past-order.module.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { MyPastOrderComponent } from './my-past-order.component';\r\n\r\nconst routes: Routes = [\r\n  {path:'', component:MyPastOrderComponent},\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class MyPastOrderRoutingModule { }\r\n","import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport { environment } from 'src/environments/environment';\r\nimport { LocalStorageService } from 'src/service/local-storage.service';\r\nimport { orderStatusMapper } from 'src/config/order-status.config';\r\nimport { ApiMainService } from 'src/service/apiService/api-main.service';\r\n\r\n@Component({\r\n  selector: 'app-my-past-order',\r\n  templateUrl: './my-past-order.component.html',\r\n  styleUrls: ['./my-past-order.component.scss']\r\n})\r\nexport class MyPastOrderComponent implements OnInit {\r\n  @ViewChild('pastOrdersListEndDiv') pastOrdersListEndDiv!: ElementRef;\r\n  @ViewChild('orderDetails') orderDetails!: ElementRef;\r\n  imageUrl = environment.imageUrl;\r\n  pastOrderList: any = [];\r\n  userProfile: any = {};\r\n  orderStatusMapper:any = orderStatusMapper;\r\n  showloader = false;\r\n  pageNumber = 1;\r\n  paginationOver = false;\r\n  order: any;\r\n  showOrders: boolean  = false;\r\n\r\n  constructor(private localStorageService: LocalStorageService, private apiMainService:ApiMainService) { }\r\n\r\n  ngOnInit(): void {\r\n    this.userProfile = this.localStorageService.getCacheData('USER_PROFILE');\r\n    if (this.userProfile && this.userProfile._id) {\r\n      this.getPastOrder();\r\n    }\r\n  }\r\n\r\n  async getPastOrder() {\r\n    try {\r\n      const pastOrderList: any = await this.apiMainService.getCustomerPastOrders(this.userProfile._id, this.pageNumber);\r\n      if (pastOrderList && pastOrderList.length > 0) {\r\n        this.pastOrderList = [...this.pastOrderList, ...pastOrderList];\r\n        this.showloader = false;\r\n      } else {\r\n        this.paginationOver = true;\r\n        this.showloader = false;\r\n      }\r\n    } catch (error) {\r\n      this.paginationOver = true;\r\n      this.showloader = false;\r\n    }\r\n  }\r\n\r\n  updateSelectedOrder(order:any) {\r\n    this.pastOrderList = [...this.pastOrderList].map(listOrder => {\r\n      if (listOrder._id === order._id) {\r\n        listOrder = { ...order };\r\n      }\r\n      return listOrder;\r\n    });\r\n  }\r\n\r\n  logScrollEnd($event:any) {\r\n    const element = $event.target;\r\n    if (element.clientHeight + 10 >= this.pastOrdersListEndDiv.nativeElement.getBoundingClientRect().top) {\r\n      if (!this.paginationOver) {\r\n        this.showloader = true;\r\n        this.pageNumber++;\r\n        this.getPastOrder();\r\n      }\r\n    }\r\n  }\r\n\r\n  toggleCanvas(){\r\n    let el = this.orderDetails.nativeElement;\r\n    el.click();\r\n  }\r\n\r\n  goToOrderPage(val:any){\r\n    this.order = val\r\n  }\r\n\r\n}\r\n","<div class=\"orders-wrapper\">\r\n    <div class=\"mt-2 center\">\r\n    </div>\r\n    <div class=\"pageContent\" data-bs-toggle=\"offcanvas\" data-bs-target=\"#orders\">\r\n        <div button class=\"listOrderStyle\" *ngFor=\"let order of pastOrderList\" (click)=\"goToOrderPage(order)\">\r\n            <div class=\"row\">\r\n                <div class=\"col-12\">\r\n                    <div class=\"header5  right bgsidepadding2\">{{order.orderDate | date: 'mediumDate'}}\r\n                    </div>\r\n                    <div class=\"header5\">Order No: {{order.orderNo}}</div>\r\n                    <div class=\"header5\">Order Status: {{orderStatusMapper[order.orderstatus]}}</div>\r\n                    <div class=\"header5 capitalize\">Order Type:\r\n                        <span>{{orderStatusMapper[order.orderType]}}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"row flex-row greyBorderBottom\" *ngIf=\"order.orderType !== 'subscription'\">\r\n                <div class=\"col-6\">\r\n                    <div class=\"header4 bold\">{{order.firstKitchenName ? order.firstKitchenName :\r\n                        order.kitchenName}}</div>\r\n                </div>\r\n                <div class=\"col-6 alignRight\">\r\n                    <div class=\"header4 bgsidepadding2\">&#8377;{{order.amount}}</div>\r\n                </div>\r\n            </div>\r\n            <div class=\"row\" class=\"header5\">\r\n                <div class=\"col-12\">\r\n                    <span *ngFor=\"let item of order.itemList; index as i\">\r\n                        {{item.itemName}} x {{item.count}}{{order.itemList.length > i+1 ? ',&nbsp;':''}}\r\n                    </span>\r\n                    <span *ngFor=\"let addon of order.addOns\">, {{addon.addOnName}} x {{addon.count}}</span>\r\n                </div>\r\n                <div class=\"col-12 header4 pointer primary1 center\">\r\n                    View Details\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div *ngIf=\"pastOrderList.length === 0\" class=\"header3 bold center bgpadding\">\r\n            No Order Found\r\n        </div>\r\n        <div #pastOrdersListEndDiv>\r\n            <img *ngIf=\"showloader\" class=\"listloader\" src=\"assets/gif/loader.gif\">\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class=\"show-orders\">\r\n    <div class=\"offcanvas offcanvas-end\" tabindex=\"-1\" id=\"orders\" aria-labelledby=\"offcanvasExampleLabel\">\r\n        <button type=\"button\" style=\"display:none;\" #canvasAddress class=\"btn-close text-reset mt-3\"\r\n            data-bs-dismiss=\"offcanvas\" aria-label=\"Close\"></button>\r\n        <div class=\"offcanvas-div\">\r\n            <div class=\"offcanvas-body\">\r\n                <!-- <div class=\"container\" *ngIf=\"!showMap\"> -->\r\n                <!-- <div class=\"select-address\" *ngIf=\"showMap\"> -->\r\n                <div class=\"select-address\">\r\n                    <button type=\"button\" style=\"display:none;\" class=\"btn-close text-reset\" #orderDetails\r\n                        data-bs-dismiss=\"offcanvas\"></button>\r\n                    <app-order-details (back)=\"toggleCanvas()\" [order]=\"order\"></app-order-details>\r\n                    <!-- <app-set-delivery-location *ngIf=\"showMap\"\r\n              [showSkipButton]=\"showSkipButton\"></app-set-delivery-location> -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { MyPastOrderComponent } from './my-past-order.component';\r\nimport { MyPastOrderRoutingModule } from './my-past-order-routing.module';\r\nimport { OrderDetailsModule } from 'src/app/order-details/order-details.module';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    MyPastOrderComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    MyPastOrderRoutingModule,\r\n    OrderDetailsModule\r\n  ],\r\n})\r\nexport class MyPastOrderModule { }\r\n"],"names":["RouterModule","MyPastOrderComponent","routes","path","component","MyPastOrderRoutingModule","forChild","imports","i1","exports","environment","orderStatusMapper","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","order_r6","firstKitchenName","kitchenName","ɵɵtextInterpolate1","amount","ɵɵtextInterpolate3","item_r11","itemName","count","itemList","length","i_r12","ɵɵtextInterpolate2","addon_r14","addOnName","ɵɵlistener","MyPastOrderComponent_div_3_Template_div_click_0_listener","restoredCtx","ɵɵrestoreView","_r16","$implicit","ctx_r15","ɵɵnextContext","ɵɵresetView","goToOrderPage","ɵɵtemplate","MyPastOrderComponent_div_3_div_14_Template","MyPastOrderComponent_div_3_span_17_Template","MyPastOrderComponent_div_3_span_18_Template","ɵɵpipeBind2","orderDate","orderNo","ctx_r0","orderstatus","orderType","ɵɵproperty","addOns","ɵɵelement","constructor","localStorageService","apiMainService","imageUrl","pastOrderList","userProfile","showloader","pageNumber","paginationOver","showOrders","ngOnInit","getCacheData","_id","getPastOrder","_this","_asyncToGenerator","getCustomerPastOrders","error","updateSelectedOrder","order","map","listOrder","logScrollEnd","$event","element","target","clientHeight","pastOrdersListEndDiv","nativeElement","getBoundingClientRect","top","toggleCanvas","el","orderDetails","click","val","ɵɵdirectiveInject","LocalStorageService","i2","ApiMainService","selectors","viewQuery","MyPastOrderComponent_Query","rf","ctx","MyPastOrderComponent_div_3_Template","MyPastOrderComponent_div_4_Template","MyPastOrderComponent_img_7_Template","MyPastOrderComponent_Template_app_order_details_back_17_listener","CommonModule","OrderDetailsModule","MyPastOrderModule","declarations"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}